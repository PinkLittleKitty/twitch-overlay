<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stream overlay demo</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: radial-gradient(ellipse at center, #2a2438 0%, #1a1625 70%, #0f0d14 100%);
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
      filter: contrast(1.1) saturate(1.2);
    }

    .overlay-container {
      position: relative;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
    }

    .background-layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    .components-layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 10;
      pointer-events: none;
    }

    .component-frame {
      position: absolute;
      pointer-events: auto;
    }

    .chat-component {
      top: 50px;
      right: 50px;
    }

    .now-playing-component {
      bottom: 50px;
      left: 50px;
    }

    .stream-info-component {
      top: 50px;
      left: 50px;
    }

    .recent-activity-component {
      bottom: 200px;
      left: 50px;
    }

    .webcam-component {
      top: 50px;
      left: 50%;
      transform: translateX(-50%);
    }

    .donation-alert-component {
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 100;
    }

    .overlay-header {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 50;
      text-align: center;
    }

    .overlay-title {
      color: #d4af37;
      font-size: 24px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 6px;
    }

    .overlay-subtitle {
      color: #8b7d6b;
      font-size: 12px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 1px;
      opacity: 0.8;
    }

    .control-panel {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #1a1625;
      border: 2px solid #4a4458;
      border-radius: 8px;
      padding: 16px;
      z-index: 1000;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    }

    .control-title {
      color: #d4af37;
      font-size: 12px;
      font-weight: 700;
      margin-bottom: 12px;
      text-align: center;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .control-button {
      display: block;
      width: 100%;
      background: #4a4458;
      color: #d4af37;
      border: 1px solid #6b5b73;
      padding: 6px 12px;
      margin-bottom: 6px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .control-button:hover {
      background: #6b5b73;
      border-color: #d4af37;
    }

    .control-button:last-child {
      margin-bottom: 0;
    }

    @media (max-width: 1400px) {
      .chat-component {
        right: 20px;
        top: 20px;
      }

      .stream-info-component {
        left: 20px;
        top: 20px;
      }

      .now-playing-component {
        left: 20px;
        bottom: 20px;
      }

      .recent-activity-component {
        left: 20px;
        bottom: 160px;
      }
    }

    @media (max-width: 768px) {
      .overlay-title {
        font-size: 24px;
      }

      .control-panel {
        bottom: 10px;
        right: 10px;
        padding: 15px;
      }
    }

    .demo-indicator {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #1a1625;
      border: 2px solid #4a4458;
      border-radius: 4px;
      padding: 8px 12px;
      z-index: 1001;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    }

    .demo-text {
      color: #d4af37;
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(ellipse at center, #2a2438 0%, #1a1625 70%, #0f0d14 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 0.5s ease;
    }

    .loading-content {
      text-align: center;
    }

    .loading-title {
      color: #d4af37;
      font-size: 36px;
      font-weight: 700;
      margin-bottom: 16px;
      text-transform: uppercase;
      letter-spacing: 3px;
      animation: loadingPulse 2s ease-in-out infinite;
    }

    .loading-subtitle {
      color: #8b7d6b;
      font-size: 14px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 1px;
      opacity: 0.8;
    }

    @keyframes loadingPulse {

      0%,
      100% {
        transform: scale(1);
        opacity: 1;
      }

      50% {
        transform: scale(1.02);
        opacity: 0.8;
      }
    }

    .hidden {
      opacity: 0;
      pointer-events: none;
    }
  </style>
</head>

<body>
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-content">
      <div class="loading-title">BALATRO</div>>
    </div>
  </div>

  <div class="overlay-container">
    <div class="background-layer">
      <iframe src="components/animated-background.html" style="width: 100%; height: 100%; border: none;"></iframe>
    </div>

    <div class="demo-indicator">
      <div class="demo-text">Demo</div>
    </div>

    <div class="components-layer">
      <div class="component-frame chat-component">
        <iframe src="components/chat.html" width="380" height="700"
          style="border: none; background: transparent;"></iframe>
      </div>

      
      <!-- NON FUNCTIONAL -->
      <div class="component-frame stream-info-component">
        <iframe src="components/stream-info.html" width="280" height="200"
          style="border: none; background: transparent;"></iframe>
      </div>

      <div class="component-frame now-playing-component">
        <iframe src="components/now-playing.html" width="350" height="120"
          style="border: none; background: transparent;"></iframe>
      </div>

      <div class="component-frame recent-activity-component">
        <iframe src="components/recent-followers.html" width="600" height="120"
          style="border: none; background: transparent;"></iframe>
      </div>

      <div class="component-frame webcam-component">
        <iframe src="components/webcam-frame.html" width="320" height="240"
          style="border: none; background: transparent;"></iframe>
      </div>

      <div class="component-frame donation-alert-component" id="donationAlertFrame" style="display: none;">
        <iframe src="components/donation-alerts.html" width="400" height="200"
          style="border: none; background: transparent;"></iframe>
      </div>
    </div>

    <div class="control-panel">
      <div class="control-title">Controls</div>
      <button class="control-button" onclick="showDonationAlert()">Test Donation Alert</button>
      <button class="control-button" onclick="triggerCelebration()">Celebration Effect</button>
      <button class="control-button" onclick="showBRBScene()">Show BRB Scene</button>
      <button class="control-button" onclick="resetOverlay()">Reset Overlay</button>
      <button class="control-button" onclick="toggleFullscreen()">Toggle Fullscreen</button>
    </div>
  </div>

  <div id="brbScene" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 5000;">
    <iframe src="components/brb-scene.html" style="width: 100%; height: 100%; border: none;"></iframe>
  </div>

  <script>
    class BalatroOverlay {
      constructor() {
        this.isFullscreen = false;
        this.brbActive = false;
        this.init();
      }

      init() {
        setTimeout(() => {
          document.getElementById('loadingOverlay').classList.add('hidden');
        }, 2000);

        this.startDemoEffects();

        this.setupKeyboardShortcuts();

        console.log('🎰 Balatro Overlay initialized! Welcome to the casino!');
      }

      startDemoEffects() {
        setInterval(() => {
          if (Math.random() < 0.3 && !this.brbActive) {
            this.showRandomDonationAlert();
          }
        }, 30000);

        setInterval(() => {
          if (Math.random() < 0.2) {
            this.triggerCelebration();
          }
        }, 45000);
      }

      showRandomDonationAlert() {
        const donors = ['CardShark', 'PokerFace', 'ChipStack', 'JokerWild', 'AceHigh', 'BluffMaster'];
        const messages = [
          'All in on this stream! 🎰',
          'Royal flush of entertainment! ♠️',
          'Betting big on your success! 💎',
          'House always wins with content like this! 🃏',
          'Jackpot stream right here! 🎯'
        ];

        const amount = Math.floor(Math.random() * 50) + 5;
        const donor = donors[Math.floor(Math.random() * donors.length)];
        const message = messages[Math.floor(Math.random() * messages.length)];

        this.showDonationAlert(amount, donor, message);
      }

      showDonationAlert(amount = 25, from = 'CardShark', message = 'All in on this amazing stream! 🎰') {
        const alertFrame = document.getElementById('donationAlertFrame');
        alertFrame.style.display = 'block';

        const iframe = alertFrame.querySelector('iframe');
        iframe.onload = () => {
          try {
            iframe.contentWindow.triggerDonation(amount, from, message);
          } catch (e) {
            console.log('Demo donation triggered');
          }
        };

        setTimeout(() => {
          alertFrame.style.display = 'none';
        }, 6000);
      }

      triggerCelebration() {
        console.log('🎉 Celebration effect triggered!');

        const overlay = document.querySelector('.overlay-container');
        overlay.style.animation = 'none';
        overlay.style.filter = 'brightness(1.2) saturate(1.3)';

        setTimeout(() => {
          overlay.style.filter = '';
        }, 1000);
      }

      showBRBScene() {
        const brbScene = document.getElementById('brbScene');
        const overlay = document.querySelector('.overlay-container');

        if (!this.brbActive) {
          brbScene.style.display = 'block';
          overlay.style.opacity = '0.3';
          this.brbActive = true;

          setTimeout(() => {
            this.hideBRBScene();
          }, 10000);
        } else {
          this.hideBRBScene();
        }
      }

      hideBRBScene() {
        const brbScene = document.getElementById('brbScene');
        const overlay = document.querySelector('.overlay-container');

        brbScene.style.display = 'none';
        overlay.style.opacity = '1';
        this.brbActive = false;
      }

      resetOverlay() {
        location.reload();
      }

      toggleFullscreen() {
        if (!this.isFullscreen) {
          if (document.documentElement.requestFullscreen) {
            document.documentElement.requestFullscreen();
          }
          this.isFullscreen = true;
        } else {
          if (document.exitFullscreen) {
            document.exitFullscreen();
          }
          this.isFullscreen = false;
        }
      }

      setupKeyboardShortcuts() {
        document.addEventListener('keydown', (e) => {
          switch (e.key) {
            case 'F11':
              e.preventDefault();
              this.toggleFullscreen();
              break;
            case 'b':
            case 'B':
              if (e.ctrlKey) {
                e.preventDefault();
                this.showBRBScene();
              }
              break;
            case 'd':
            case 'D':
              if (e.ctrlKey) {
                e.preventDefault();
                this.showRandomDonationAlert();
              }
              break;
            case 'c':
            case 'C':
              if (e.ctrlKey) {
                e.preventDefault();
                this.triggerCelebration();
              }
              break;
          }
        });
      }
    }

    function showDonationAlert() {
      window.balatroOverlay.showRandomDonationAlert();
    }

    function triggerCelebration() {
      window.balatroOverlay.triggerCelebration();
    }

    function showBRBScene() {
      window.balatroOverlay.showBRBScene();
    }

    function resetOverlay() {
      window.balatroOverlay.resetOverlay();
    }

    function toggleFullscreen() {
      window.balatroOverlay.toggleFullscreen();
    }

    window.balatroOverlay = new BalatroOverlay();
  </script>
</body>

</html>